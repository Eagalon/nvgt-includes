#include"savedata.nvgt"
#include"form.nvgt"
savedata sd("config.dat","testkey",savedata_def);
double s=-1;
timer f;
#include"instance.nvgt"
instance j("savedata");
void main()
{
if(j.is_already_running)
{
alert("error","active");
exit();
}
s=-1;
show_window("test data");
loadsd();
if(s>-1) alert("previously","the timer is "+s);
wait(2000);
speak("press escape to exit");
while(true)
{
wait(5);
if(key_pressed(KEY_ESCAPE))
{
savesd();
alert("ok","saved");
exit();
}
}//while
exit();
}
void loadsd()
{
sd.load();
if(sd.exists("time")) s=sd.readn("time");
}
void savesd()
{
sd.clear();
sd.add("time",f.elapsed);
sd.save();
}