#include"sound_pool.nvgt"
#include"form.nvgt"
sound_pool p;
double x=0,y=0,z=0;
vector user;
double face=north;
void main()
{
sound_global_hrtf=true;
show_window("test");
wait(1000);
speak("press the left, right, up, down, page up/down to navigate. press q and e to change directions, press f to check where you're face, and c to check coordinates, escape to break.");
p.play_3d("music.ogg",x,y,z,5,5,0,face,true);
while(true)
{
wait(5);
p.update_listener_3d(x,y,z,calculate_theta(face));
x=round(user.x,0);y=round(user.y,0);z=round(user.z,0);
if(key_pressed(KEY_ESCAPE)) exit();
if(key_repeating(KEY_LEFT) && x>0) user=move(x,y,z,face,west);
else if(key_repeating(KEY_RIGHT)) user=move(x,y,z,face,east);
else if(key_repeating(KEY_DOWN) && y>0) user=move(x,y,z,face,south);
else if(key_repeating(KEY_UP)) user=move(x,y,z,face,north);
else if(key_repeating(KEY_PAGEUP)) z++;
else if(key_repeating(KEY_PAGEDOWN) && z>0) z--;
if(key_pressed(KEY_E)) face=turnright(face,45);
else if(key_pressed(KEY_Q)) face=turnleft(face,45);
if(key_pressed(KEY_F)) speak(dir_to_string(face)+" at "+face+" degrees");
if(key_pressed(KEY_C)) speak(x+", "+y+", "+z);
}
}